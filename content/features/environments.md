---
title: 'Remote Environments'
description: 'Learn how to set up and manage remote Docker hosts using the Arcane agent for centralized container management.'
---

<script lang="ts">
import { Snippet } from '$lib/components/ui/snippet/index.js';
import ScreenshotFrame from '$lib/components/screenshot-frame.svelte';
</script>

## Overview

Remote Environments let Arcane manage containers on other hosts through a stripped down version of Arcane itself. You run the Agent on a remote machine (with access to its Docker daemon), and the Manager (main server) connects to its API with an API key generated on the initial setup.

Arcane supports two connection modes:

- **Direct** (default): the Manager connects to the Agent over TCP 3553.
- **Edge**: the Agent connects outbound to the Manager over a tunnel (no inbound ports required).

## Screenshot

<ScreenshotFrame
  src="/img/screenshots/environments-page.jpeg"
  alt="Remote environments page in Arcane"
  caption="Remote environments page in Arcane."
  loading="lazy"
  decoding="async"
/>

## Requirements

- Arcane running and reachable from the Agent host
- Docker installed on the Agent host (with permission to mount `/var/run/docker.sock`)
- **Direct mode only:** network access from Manager to Agent on TCP 3553
- **Edge mode only:** outbound network access from Agent to Manager (no inbound ports required)
- The Environment is created in Arcane before trying to start it on the destination host.

## Setup on the Arcane Manager (Direct)

1. Navigate to **Environments** from the sidebar and click **Add Environment**.
2. Enter the name for the new environment.
3. Select **http** or **https** and then the full API URL of the agent. For example: `http://my-new-agent:3553` or `http://10.1.1.5:3553`.
4. Select **Create**.
5. Copy either the generated Docker run or Docker Compose commands and set up the agent on the new host.
6. The agent will auto check in with the manager based on the `MANAGER_API_URL` environment variable.

Below is an example Docker Compose file generated by the wizard. The `MANAGER_API_URL` is automatically set to whatever the `APP_URL` variable is, and the `AGENT_TOKEN` is the generated API key for authenticated communication between the hosts.

```yaml
services:
  arcane-agent:
    image: ghcr.io/getarcaneapp/arcane-headless:latest
    container_name: arcane-agent
    ports:
      - '3553:3553'
    environment:
      - AGENT_MODE=true
      - AGENT_TOKEN=arc_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
      - MANAGER_API_URL=http://10.1.1.4:3552
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - agent-data:/app/data
    restart: unless-stopped

volumes:
  agent-data: {}
```

Start the Agent:

```bash
docker compose up -d
```

## Edge Agent (Outbound)

Edge agents connect outbound to the Manager through a tunnel. This is ideal for firewalled or NAT environments where the Manager cannot reach the agent directly.

### Setup on the Arcane Manager (Edge)

1. Navigate to **Environments** from the sidebar and click **Add Environment**.
2. Select the **Edge** tab.
3. Enter the name for the new environment and select **Generate Agent Configuration**.
4. Copy either the generated Docker run or Docker Compose commands and set up the agent on the new host.

Below is an example Docker Compose file for an edge agent. Notice there are **no exposed ports** and the `EDGE_AGENT=true` flag is used.

```yaml
services:
  arcane-edge-agent:
    image: ghcr.io/getarcaneapp/arcane-headless:latest
    container_name: arcane-edge-agent
    environment:
      - EDGE_AGENT=true
      - AGENT_TOKEN=arc_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
      - MANAGER_API_URL=http://10.1.1.4:3552
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - agent-data:/app/data
    restart: unless-stopped

volumes:
  agent-data: {}
```

Start the Edge Agent:

```bash
docker compose up -d
```

## Managing Environment Settings

To update the configuration of an existing environment:

1. Navigate to **Environments** from the sidebar.
2. Choose the environment you want to modify from the list.
3. Edit the settings as needed and save your changes.

## Standalone Binary

If you prefer to run the agent via the static binary you can do so with the instructions below:

1. Download the latest binary for your platform from the releases page.
2. Move the binary to where you would like to run it from and create your `.env` file:

> [!NOTE]
> The `GIN_MODE=release` environment variable is needed in this case due to it not being set via the dockerfile (unless you don't care if Gin runs in development mode).

```
GIN_MODE=release
AGENT_MODE=true
AGENT_TOKEN=arc_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
MANAGER_API_URL=http://10.1.1.4:3552
ENVIRONMENT=production
PORT=3553
```

3. Run the following command to start the agent, make sure to replace the environment variables with yours:

<Snippet text="./arcane-agent" class="mt-2 mb-2 w-full" />

You can also skip creating a `.env` file and just use inline environment variables:

<Snippet text="ENVIRONMENT=production GIN_MODE=release PORT=3553 AGENT_MODE=true AGENT_TOKEN=arc_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX MANAGER_API_URL=http://10.1.1.4:3552 ./arcane-agent" class="mt-2 mb-2 w-full" />
