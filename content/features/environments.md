---
title: 'Remote Environments'
description: 'Learn how to set up and manage remote Docker hosts using the Arcane agent for centralized container management.'
---

<script lang="ts">
import { Snippet } from '$lib/components/ui/snippet/index.js';
</script>

## Overview

Remote Environments let Arcane manage containers on other hosts through a stripped down version of Arcane itself. You run the Agent on a remote machine (with access to its Docker daemon), and the Manager (main server) connects to its API with an API key generated on the initial setup.

## Requirements

- Arcane running and reachable from the Agent host
- Docker installed on the Agent host (with permission to mount `/var/run/docker.sock`)
- Network access from Manager to Agent on TCP 3553
- The Environment is created in Arcane before trying to start it on the destination host.

# Setup on the Arcane Manager:

1. Navigate to Environments from the sidebar and click Add Environment
2. Enter the Name for the new environment 
3. Select http or https and then the full API url (of the agent). For example: `http://my-new-agent:3553 or http://10.1.1.5:3553`
4. Select Create 
5. Copy either the generated Docker run or Docker Compose commands and setup the agent on the new host.
6. The agent will auto check in with the manager given based on the ENV Varible: `MANAGER_API_URL` automatically.

Below is an example of Docker compose file generated by the wizard:

The `MANAGER_API_URL` is auto set to whatever the `APP_URL` variable is.
The `AGENT_TOKEN` is the generated API key for authenticated communication between the hosts.

```yaml
services:
  arcane-agent:
    image: ghcr.io/getarcaneapp/arcane-headless:latest
    container_name: arcane-agent
    ports:
      - '3553:3553'
    environment:
      - AGENT_MODE=true
      - AGENT_TOKEN=arc_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
      - MANAGER_API_URL=http://10.1.1.4:3552
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - agent-data:/app/data
    restart: unless-stopped

volumes:
  agent-data: {}
```

Start the Agent:

```bash
docker compose up -d
```

## Standalone Binary

If you prefer to run the agent via the static binary you can do so with the instructions below:

1. Download the latest binary for your platform from the releases page
2. Move the binary to where you would like to run it from and create your `.env` file:

> [!NOTE]
> The `GIN_MODE=release` environment variable is needed in this case due to it not being set via the dockerfile (unless you don't care if Gin runs in development mode).

```
GIN_MODE=release
AGENT_MODE=true
AGENT_TOKEN=arc_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
MANAGER_API_URL=http://10.1.1.4:3552
ENVIRONMENT=production
PORT=3553
```
3. Run the following command to start the agent, make sure to replace the environment variables with yours:

<Snippet text="./arcane-agent" class="mt-2 mb-2 w-full" />

You can also skip creating a `.env` file and just use inline environment variables:
<Snippet text="ENVIRONMENT=production GIN_MODE=release PORT=3553 AGENT_MODE=true AGENT_TOKEN=arc_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX MANAGER_API_URL=http://10.1.1.4:3552 ./arcane-agent" class="mt-2 mb-2 w-full" />


## Troubleshooting

- Connection errors: Ensure port 3553 is reachable from the Manager to the Agent host.
- Docker access issues: Verify `/var/run/docker.sock` is mounted and the container user has permissions.
- Logs: `docker logs -f arcane-agent`
